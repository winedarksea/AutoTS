<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P2KLF8302E"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-P2KLF8302E');
    </script>
    
    <title>autots.evaluator package &#8212; AutoTS 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=a4fa0645" />
    <script src="../_static/documentation_options.js?v=8d563738"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="autots.mcp package" href="autots.mcp.html" />
    <link rel="prev" title="autots.datasets package" href="autots.datasets.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="autots-evaluator-package">
<h1>autots.evaluator package<a class="headerlink" href="#autots-evaluator-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="autots-evaluator-anomaly-detector-module">
<h2>autots.evaluator.anomaly_detector module<a class="headerlink" href="#autots-evaluator-anomaly-detector-module" title="Link to this heading">¶</a></h2>
</section>
<section id="autots-evaluator-auto-model-module">
<h2>autots.evaluator.auto_model module<a class="headerlink" href="#autots-evaluator-auto-model-module" title="Link to this heading">¶</a></h2>
</section>
<section id="autots-evaluator-auto-ts-module">
<h2>autots.evaluator.auto_ts module<a class="headerlink" href="#autots-evaluator-auto-ts-module" title="Link to this heading">¶</a></h2>
</section>
<section id="autots-evaluator-benchmark-module">
<h2>autots.evaluator.benchmark module<a class="headerlink" href="#autots-evaluator-benchmark-module" title="Link to this heading">¶</a></h2>
</section>
<section id="autots-evaluator-event-forecasting-module">
<h2>autots.evaluator.event_forecasting module<a class="headerlink" href="#autots-evaluator-event-forecasting-module" title="Link to this heading">¶</a></h2>
</section>
<section id="autots-evaluator-feature-detector-module">
<h2>autots.evaluator.feature_detector module<a class="headerlink" href="#autots-evaluator-feature-detector-module" title="Link to this heading">¶</a></h2>
</section>
<section id="module-autots.evaluator.metrics">
<span id="autots-evaluator-metrics-module"></span><h2>autots.evaluator.metrics module<a class="headerlink" href="#module-autots.evaluator.metrics" title="Link to this heading">¶</a></h2>
<p>Tools for calculating forecast errors.</p>
<dl class="simple">
<dt>Some common args:</dt><dd><p>A or actual (np.array): actuals ndim 2 (timesteps, series)
F or forecast (np.array): forecast values ndim 2 (timesteps, series)
ae (np.array): precalculated np.abs(A - F)</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.array_last_val">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">array_last_val</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.array_last_val" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.chi_squared_hist_distribution_loss">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">chi_squared_hist_distribution_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.chi_squared_hist_distribution_loss" title="Link to this definition">¶</a></dt>
<dd><p>Distribution loss, chi-squared distance from histograms.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.containment">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">containment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lower_forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actual</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.containment" title="Link to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>forecast</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.contour">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">contour</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.contour" title="Link to this definition">¶</a></dt>
<dd><p>A measure of how well the actual and forecast follow the same pattern of change.
<em>Note:</em> If actual values are unchanging, will match positive changing forecasts.
This is faster, and because if actuals are a flat line, contour probably isn’t a concern regardless.</p>
<p># bluff tops follow the shape of the river below, at different elevation</p>
<p>Expects two, 2-D numpy arrays of forecast_length * n series
Returns a 1-D array of results in len n series</p>
<p>NaNs diffs are filled with 0, essentially equiavelent to assuming a forward fill of NaN</p>
<p>Concat the last row of history to head of both A and F (req for 1 step)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.default_scaler">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">default_scaler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.default_scaler" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.dwae">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">dwae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_of_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.dwae" title="Link to this definition">¶</a></dt>
<dd><p>Direcitonal Weighted Absolute Error, the accuracy of growth or decline relative to most recent data.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.full_metric_evaluation">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">full_metric_evaluation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaler</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_components</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cumsum_A</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diff_A</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_of_array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.full_metric_evaluation" title="Link to this definition">¶</a></dt>
<dd><p>Create a pd.DataFrame of metrics per series given actuals, forecast, and precalculated errors.
There are some extra args which are precomputed metrics for efficiency in loops, don’t worry about them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.array</em>) – array or df of actuals</p></li>
<li><p><strong>F</strong> (<em>np.array</em>) – array or df of forecasts</p></li>
<li><p><strong>return_components</strong> (<em>bool</em>) – if True, return tuple of detailed errors</p></li>
<li><p><strong>metric</strong> (<em>custom</em>) – a function to generate a custom metric. Expects func(A, F, df_train, prediction_interval) where the first three are np arrays of wide style 2d.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.kde">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">kde</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actuals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecasts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandwidth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.kde" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.kde_kl_distance">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">kde_kl_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandwidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.kde_kl_distance" title="Link to this definition">¶</a></dt>
<dd><p>Distribution loss by means of KDE and KL Divergence.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.kl_divergence">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">kl_divergence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.kl_divergence" title="Link to this definition">¶</a></dt>
<dd><p>Compute KL Divergence between two distributions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.linearity">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">linearity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.linearity" title="Link to this definition">¶</a></dt>
<dd><p>Score perecentage of a np.array with linear progression, along the index (0) axis.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mae">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ae</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mae" title="Link to this definition">¶</a></dt>
<dd><p>Accepting abs error already calculated</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mda">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mda</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mda" title="Link to this definition">¶</a></dt>
<dd><p>A measure of how well the actual and forecast follow the same pattern of change.
Expects two, 2-D numpy arrays of forecast_length * n series
Returns a 1-D array of results in len n series</p>
<p>NaNs diffs are filled with 0, essentially equiavelent to assuming a forward fill of NaN</p>
<p>Concat the last row of history to head of both A and F (req for 1 step)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mean_absolute_differential_error">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mean_absolute_differential_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaler</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mean_absolute_differential_error" title="Link to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
<li><p><strong>order</strong> (<em>int</em>) – order of differential</p></li>
<li><p><strong>df_train</strong> (<em>np.array</em>) – if provided, uses this as starting point for first diff step.
Tail(1) must be most recent historical point before forecast.
Must be numpy Array not DataFrame.
Highly recommended if using this as the sole optimization metric.
Without, it is an “unanchored” shape fitting metric.
This will also allow this to work on forecast_length = 1 forecasts</p></li>
<li><p><strong>scaler</strong> (<em>np.array</em>) – if provided, metrics are scaled by this. 1d array of shape (num_series,)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mean_absolute_error">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mean_absolute_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mean_absolute_error" title="Link to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.medae">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">medae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ae</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.medae" title="Link to this definition">¶</a></dt>
<dd><p>Accepting abs error already calculated</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.median_absolute_error">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">median_absolute_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.median_absolute_error" title="Link to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mlvb">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mlvb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_of_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mlvb" title="Link to this definition">¶</a></dt>
<dd><p>Mean last value baseline, the % difference of forecast vs last value naive forecast.
Does poorly with near-zero values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.array</em>) – actuals</p></li>
<li><p><strong>F</strong> (<em>np.array</em>) – forecast values</p></li>
<li><p><strong>last_of_array</strong> (<em>np.array</em>) – the last row of the historic training data, most recent values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mqae">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mqae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ae</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.85</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mqae" title="Link to this definition">¶</a></dt>
<dd><p>Return the mean of errors less than q quantile of the errors per series.
np.nans count as largest values, and so are removed as part of the &gt; q group.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.msle">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">msle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full_errors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ae</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">le</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.msle" title="Link to this definition">¶</a></dt>
<dd><p>input is array of y_pred - y_true to over-penalize underestimate.
Use instead y_true - y_pred to over-penalize overestimate.
AE used here for the log just to avoid divide by zero warnings (values aren’t used either way)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.numpy_ffill">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">numpy_ffill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.numpy_ffill" title="Link to this definition">¶</a></dt>
<dd><p>Fill np.nan forward down the zero axis.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.oda">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">oda</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_of_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.oda" title="Link to this definition">¶</a></dt>
<dd><p>Origin Directional Accuracy, the accuracy of growth or decline relative to most recent data.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.pinball_loss">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">pinball_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.pinball_loss" title="Link to this definition">¶</a></dt>
<dd><p>Bigger is bad-er.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.precomp_wasserstein">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">precomp_wasserstein</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cumsum_A</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.precomp_wasserstein" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.qae">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">qae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ae</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.qae" title="Link to this definition">¶</a></dt>
<dd><p>Return the q quantile of the errors per series.
np.nans count as smallest values and will push more values into the exclusion group.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.rmse">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">rmse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sqe</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.rmse" title="Link to this definition">¶</a></dt>
<dd><p>Accepting squared error already calculated</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.root_mean_square_error">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">root_mean_square_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.root_mean_square_error" title="Link to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>forecast</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.rps">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">rps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predictions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observed</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.rps" title="Link to this definition">¶</a></dt>
<dd><p>Vectorized version of Ranked Probability Score.
A lower value is a better score.
From: Colin Catlin, <a class="reference external" href="https://syllepsis.live/2022/01/22/ranked-probability-score-in-python/">https://syllepsis.live/2022/01/22/ranked-probability-score-in-python/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>predictions</strong> (<em>pd.DataFrame</em>) – each column is an outcome category, with values as the 0 to 1 probability of that category</p></li>
<li><p><strong>observed</strong> (<em>pd.DataFrame</em>) – each column is an outcome category, with values of 0 OR 1 with 1 being that category occurred</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.scaled_pinball_loss">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">scaled_pinball_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.scaled_pinball_loss" title="Link to this definition">¶</a></dt>
<dd><p>Scaled pinball loss.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.array</em>) – actual values</p></li>
<li><p><strong>F</strong> (<em>np.array</em>) – forecast values</p></li>
<li><p><strong>df_train</strong> (<em>np.array</em>) – values of historic data for scaling</p></li>
<li><p><strong>quantile</strong> (<em>float</em>) – which bound of upper/lower forecast this is</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.smape">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">smape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ae</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.smape" title="Link to this definition">¶</a></dt>
<dd><p>Accepting abs error already calculated</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.smoothness">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">smoothness</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.smoothness" title="Link to this definition">¶</a></dt>
<dd><p>A gradient measure of linearity, where 0 is linear and larger values are more volatile.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.spl">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">spl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">precomputed_spl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaler</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.spl" title="Link to this definition">¶</a></dt>
<dd><p>Accepting most of it already calculated</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.symmetric_mean_absolute_percentage_error">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">symmetric_mean_absolute_percentage_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.symmetric_mean_absolute_percentage_error" title="Link to this definition">¶</a></dt>
<dd><p>Expect two, 2-D numpy arrays of forecast_length * n series.
Allows NaN in actuals, and corresponding NaN in forecast, but not unmatched NaN in forecast
Also doesn’t like zeroes in either forecast or actual - results in poor error value even if forecast is accurate</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>forecast</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
<p class="rubric">References</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Symmetric_mean_absolute_percentage_error">https://en.wikipedia.org/wiki/Symmetric_mean_absolute_percentage_error</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.threshold_loss">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">threshold_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">penalty_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.threshold_loss" title="Link to this definition">¶</a></dt>
<dd><p>Run once for overestimate then again for underestimate. Add both for combined view.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual/forecast</strong> – 2D wide style data DataFrame or np.array</p></li>
<li><p><strong>threshold</strong> – (0, 2), 0.9 (penalize 10% and greater underestimates) and 1.1 (penalize overestimate over 10%)</p></li>
<li><p><strong>penalty_threshold</strong> – defaults to same as threshold, adjust strength of penalty</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.unsorted_wasserstein">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">unsorted_wasserstein</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.unsorted_wasserstein" title="Link to this definition">¶</a></dt>
<dd><p>Also known as earth moving distance.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.wasserstein">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">wasserstein</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.wasserstein" title="Link to this definition">¶</a></dt>
<dd><p>This version has sorting, which is perhaps less relevant on average than the unsorted.</p>
</dd></dl>

</section>
<section id="autots-evaluator-validation-module">
<h2>autots.evaluator.validation module<a class="headerlink" href="#autots-evaluator-validation-module" title="Link to this heading">¶</a></h2>
</section>
<section id="module-autots.evaluator">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-autots.evaluator" title="Link to this heading">¶</a></h2>
<p>Model Evaluators</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/autots_logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Automated Forecasting</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=winedarksea&repo=autots&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html#autots">AutoTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html#extended-tutorial">Extended Tutorial</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">autots</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="autots.html">autots package</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="modules.html">autots</a><ul>
  <li><a href="autots.html">autots package</a><ul>
      <li>Previous: <a href="autots.datasets.html" title="previous chapter">autots.datasets package</a></li>
      <li>Next: <a href="autots.mcp.html" title="next chapter">autots.mcp package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2025, Colin Catlin.
      
      |
      <a href="../_sources/source/autots.evaluator.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>