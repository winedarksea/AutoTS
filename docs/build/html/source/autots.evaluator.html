
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>autots.evaluator package &#8212; AutoTS 0.4.2 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="autots.models package" href="autots.models.html" />
    <link rel="prev" title="autots.datasets package" href="autots.datasets.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="autots-evaluator-package">
<h1>autots.evaluator package<a class="headerlink" href="#autots-evaluator-package" title="Permalink to this headline">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-autots.evaluator.auto_model">
<span id="autots-evaluator-auto-model-module"></span><h2>autots.evaluator.auto_model module<a class="headerlink" href="#module-autots.evaluator.auto_model" title="Permalink to this headline">¶</a></h2>
<p>Mid-level helper functions for AutoTS.</p>
<dl class="function">
<dt id="autots.evaluator.auto_model.ModelMonster">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">ModelMonster</code><span class="sig-paren">(</span><em class="sig-param">model: str</em>, <em class="sig-param">parameters: dict = {}</em>, <em class="sig-param">frequency: str = 'infer'</em>, <em class="sig-param">prediction_interval: float = 0.9</em>, <em class="sig-param">holiday_country: str = 'US'</em>, <em class="sig-param">startTimeStamps=None</em>, <em class="sig-param">forecast_length: int = 14</em>, <em class="sig-param">random_seed: int = 2020</em>, <em class="sig-param">verbose: int = 0</em>, <em class="sig-param">n_jobs: int = None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.ModelMonster" title="Permalink to this definition">¶</a></dt>
<dd><p>Directs strings and parameters to appropriate model objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>str</em>) – Name of Model Function</p></li>
<li><p><strong>parameters</strong> (<em>dict</em>) – Dictionary of parameters to pass through to model</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.ModelPrediction">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">ModelPrediction</code><span class="sig-paren">(</span><em class="sig-param">df_train</em>, <em class="sig-param">forecast_length: int</em>, <em class="sig-param">transformation_dict: dict</em>, <em class="sig-param">model_str: str</em>, <em class="sig-param">parameter_dict: dict</em>, <em class="sig-param">frequency: str = 'infer'</em>, <em class="sig-param">prediction_interval: float = 0.9</em>, <em class="sig-param">no_negatives: bool = False</em>, <em class="sig-param">constraint: float = None</em>, <em class="sig-param">future_regressor_train=None</em>, <em class="sig-param">future_regressor_forecast=None</em>, <em class="sig-param">holiday_country: str = 'US'</em>, <em class="sig-param">startTimeStamps=None</em>, <em class="sig-param">grouping_ids=None</em>, <em class="sig-param">fail_on_forecast_nan: bool = True</em>, <em class="sig-param">return_model: bool = False</em>, <em class="sig-param">random_seed: int = 2020</em>, <em class="sig-param">verbose: int = 0</em>, <em class="sig-param">n_jobs: int = None</em>, <em class="sig-param">current_model_file: str = None</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.ModelPrediction" title="Permalink to this definition">¶</a></dt>
<dd><p>Feed parameters into modeling pipeline</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_train</strong> (<em>pandas.DataFrame</em>) – numeric training dataset of DatetimeIndex and series as cols</p></li>
<li><p><strong>forecast_length</strong> (<em>int</em>) – number of periods to forecast</p></li>
<li><p><strong>transformation_dict</strong> (<em>dict</em>) – a dictionary of outlier, fillNA, and transformation methods to be used</p></li>
<li><p><strong>model_str</strong> (<em>str</em>) – a string to be direct to the appropriate model, used in ModelMonster</p></li>
<li><p><strong>frequency</strong> (<em>str</em>) – str representing frequency alias of time series</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – width of errors (note: rarely do the intervals accurately match the % asked for…)</p></li>
<li><p><strong>no_negatives</strong> (<em>bool</em>) – whether to force all forecasts to be &gt; 0</p></li>
<li><p><strong>constraint</strong> (<em>float</em>) – when not None, use this value * data st dev above max or below min for constraining forecast values.</p></li>
<li><p><strong>future_regressor_train</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching train data</p></li>
<li><p><strong>future_regressor_forecast</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching test data</p></li>
<li><p><strong>holiday_country</strong> (<em>str</em>) – passed through to holiday package, used by a few models as 0/1 regressor.</p></li>
<li><p><strong>startTimeStamps</strong> (<em>pd.Series</em>) – index (series_ids), columns (Datetime of First start of series)</p></li>
<li><p><strong>fail_on_forecast_nan</strong> (<em>bool</em>) – if False, return forecasts even if NaN present, if True, raises error if any nan in forecast</p></li>
<li><p><strong>return_model</strong> (<em>bool</em>) – if True, forecast will have .model and .tranformer attributes set to model object.</p></li>
<li><p><strong>n_jobs</strong> (<em>int</em>) – number of processes</p></li>
<li><p><strong>current_model_file</strong> (<em>str</em>) – file path to write to disk of current model params (for debugging if computer crashes). .json is appended</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Prediction from AutoTS model object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="autots.models.html#autots.models.base.PredictionObject" title="autots.models.base.PredictionObject">PredictionObject</a> (autots.PredictionObject)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.NewGeneticTemplate">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">NewGeneticTemplate</code><span class="sig-paren">(</span><em class="sig-param">model_results, submitted_parameters, sort_column: str = 'Score', sort_ascending: bool = True, max_results: int = 50, max_per_model_class: int = 5, top_n: int = 50, template_cols: list = ['Model', 'ModelParameters', 'TransformationParameters', 'Ensemble'], transformer_list: dict = {}, transformer_max_depth: int = 8, models_mode: str = 'default', score_per_series=None</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.NewGeneticTemplate" title="Permalink to this definition">¶</a></dt>
<dd><p>Return new template given old template with model accuracies.</p>
<p>“No mating!” - Pattern, Sanderson</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_results</strong> (<em>pandas.DataFrame</em>) – models that have actually been run</p></li>
<li><p><strong>submitted_paramters</strong> (<em>pandas.DataFrame</em>) – models tried (may have returned different parameters to results)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.RandomTemplate">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">RandomTemplate</code><span class="sig-paren">(</span><em class="sig-param">n: int = 10, model_list: list = ['ZeroesNaive', 'LastValueNaive', 'AverageValueNaive', 'GLS', 'GLM', 'ETS'], transformer_list: dict = 'fast', transformer_max_depth: int = 8, models_mode: str = 'default'</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.RandomTemplate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a template dataframe of randomly generated transformations, models, and hyperparameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n</strong> (<em>int</em>) – number of random models to return</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="autots.evaluator.auto_model.TemplateEvalObject">
<em class="property">class </em><code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">TemplateEvalObject</code><span class="sig-paren">(</span><em class="sig-param">model_results=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">per_timestamp_smape=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">per_series_mae=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">per_series_rmse=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">per_series_made=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">per_series_contour=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">per_series_spl=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">per_series_mle=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">per_series_imle=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">per_series_maxe=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">per_series_oda=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">per_series_mqae=Empty DataFrame Columns: [] Index: []</em>, <em class="sig-param">model_count: int = 0</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.TemplateEvalObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object to contain all the failures!.</p>
<dl class="attribute">
<dt id="autots.evaluator.auto_model.TemplateEvalObject.full_mae_ids">
<code class="sig-name descname">full_mae_ids</code><a class="headerlink" href="#autots.evaluator.auto_model.TemplateEvalObject.full_mae_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>list of model_ids corresponding to full_mae_errors</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="autots.evaluator.auto_model.TemplateEvalObject.full_mae_errors">
<code class="sig-name descname">full_mae_errors</code><a class="headerlink" href="#autots.evaluator.auto_model.TemplateEvalObject.full_mae_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>list of numpy arrays of shape (rows, columns) appended in order of validation
only provided for ‘mosaic’ ensembling</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_model.TemplateEvalObject.concat">
<code class="sig-name descname">concat</code><span class="sig-paren">(</span><em class="sig-param">another_eval</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.TemplateEvalObject.concat" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge another TemplateEvalObject onto this one.</p>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_model.TemplateEvalObject.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.TemplateEvalObject.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save results to a file.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.TemplateWizard">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">TemplateWizard</code><span class="sig-paren">(</span><em class="sig-param">template, df_train, df_test, weights, model_count: int = 0, ensemble: list = ['mosaic', 'distance'], forecast_length: int = 14, frequency: str = 'infer', prediction_interval: float = 0.9, no_negatives: bool = False, constraint: float = None, future_regressor_train=None, future_regressor_forecast=None, holiday_country: str = 'US', startTimeStamps=None, random_seed: int = 2020, verbose: int = 0, n_jobs: int = None, validation_round: int = 0, current_generation: int = 0, max_generations: str = '0', model_interrupt: bool = False, grouping_ids=None, template_cols: list = ['Model', 'ModelParameters', 'TransformationParameters', 'Ensemble'], traceback: bool = False, current_model_file: str = None</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.TemplateWizard" title="Permalink to this definition">¶</a></dt>
<dd><p>Take Template, returns Results.</p>
<p>There are some who call me… Tim. - Python</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>pandas.DataFrame</em>) – containing model str, and json of transformations and hyperparamters</p></li>
<li><p><strong>df_train</strong> (<em>pandas.DataFrame</em>) – numeric training dataset of DatetimeIndex and series as cols</p></li>
<li><p><strong>df_test</strong> (<em>pandas.DataFrame</em>) – dataframe of actual values of (forecast length * n series)</p></li>
<li><p><strong>weights</strong> (<em>dict</em>) – key = column/series_id, value = weight</p></li>
<li><p><strong>ensemble</strong> (<em>list</em>) – list of ensemble types to prepare metric collection</p></li>
<li><p><strong>forecast_length</strong> (<em>int</em>) – number of periods to forecast</p></li>
<li><p><strong>transformation_dict</strong> (<em>dict</em>) – a dictionary of outlier, fillNA, and transformation methods to be used</p></li>
<li><p><strong>model_str</strong> (<em>str</em>) – a string to be direct to the appropriate model, used in ModelMonster</p></li>
<li><p><strong>frequency</strong> (<em>str</em>) – str representing frequency alias of time series</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – width of errors (note: rarely do the intervals accurately match the % asked for…)</p></li>
<li><p><strong>no_negatives</strong> (<em>bool</em>) – whether to force all forecasts to be &gt; 0</p></li>
<li><p><strong>constraint</strong> (<em>float</em>) – when not None, use this value * data st dev above max or below min for constraining forecast values.</p></li>
<li><p><strong>future_regressor_train</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching train data</p></li>
<li><p><strong>future_regressor_forecast</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching test data</p></li>
<li><p><strong>holiday_country</strong> (<em>str</em>) – passed through to holiday package, used by a few models as 0/1 regressor.</p></li>
<li><p><strong>startTimeStamps</strong> (<em>pd.Series</em>) – index (series_ids), columns (Datetime of First start of series)</p></li>
<li><p><strong>validation_round</strong> (<em>int</em>) – int passed to record current validation.</p></li>
<li><p><strong>current_generation</strong> (<em>int</em>) – info to pass to print statements</p></li>
<li><p><strong>max_generations</strong> (<em>str</em>) – info to pass to print statements</p></li>
<li><p><strong>model_interrupt</strong> (<em>bool</em>) – if True, keyboard interrupts are caught and only break current model eval.</p></li>
<li><p><strong>template_cols</strong> (<em>list</em>) – column names of columns used as model template</p></li>
<li><p><strong>traceback</strong> (<em>bool</em>) – include tracebook over just error representation</p></li>
<li><p><strong>current_model_file</strong> (<em>str</em>) – file path to write to disk of current model params (for debugging if computer crashes). .json is appended</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>TemplateEvalObject</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.UniqueTemplates">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">UniqueTemplates</code><span class="sig-paren">(</span><em class="sig-param">existing_templates, new_possibilities, selection_cols: list = ['Model', 'ModelParameters', 'TransformationParameters', 'Ensemble']</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.UniqueTemplates" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns unique dataframe rows from new_possiblities not in existing_templates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>selection_cols</strong> (<em>list</em>) – list of column namess to use to judge uniqueness/match on</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.back_forecast">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">back_forecast</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">model_name</em>, <em class="sig-param">model_param_dict</em>, <em class="sig-param">model_transform_dict</em>, <em class="sig-param">future_regressor_train=None</em>, <em class="sig-param">n_splits: int = 'auto'</em>, <em class="sig-param">forecast_length=14</em>, <em class="sig-param">frequency='infer'</em>, <em class="sig-param">prediction_interval=0.9</em>, <em class="sig-param">no_negatives=False</em>, <em class="sig-param">constraint=None</em>, <em class="sig-param">holiday_country='US'</em>, <em class="sig-param">random_seed=123</em>, <em class="sig-param">n_jobs='auto'</em>, <em class="sig-param">verbose=0</em>, <em class="sig-param">eval_periods: int = None</em>, <em class="sig-param">current_model_file: str = None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.back_forecast" title="Permalink to this definition">¶</a></dt>
<dd><p>Create forecasts for the historical training data, ie. backcast or back forecast.</p>
<p>This actually forecasts on historical data, these are not fit model values as are often returned by other packages.
As such, this will be slower, but more representative of real world model performance.
There may be jumps in data between chunks.</p>
<p>Args are same as for model_forecast except…
n_splits(int): how many pieces to split data into. Pass 2 for fastest, or “auto” for best accuracy</p>
<p>Returns a standard prediction object (access .forecast, .lower_forecast, .upper_forecast)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>eval_period</strong> (<em>int</em>) – if passed, only returns results for this many time steps of recent history</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.create_model_id">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">create_model_id</code><span class="sig-paren">(</span><em class="sig-param">model_str: str</em>, <em class="sig-param">parameter_dict: dict = {}</em>, <em class="sig-param">transformation_dict: dict = {}</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.create_model_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a hash ID which should be unique to the model parameters.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.dict_recombination">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">dict_recombination</code><span class="sig-paren">(</span><em class="sig-param">a: dict</em>, <em class="sig-param">b: dict</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.dict_recombination" title="Permalink to this definition">¶</a></dt>
<dd><p>Recombine two dictionaries with identical keys. Return new dict.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.generate_score">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">generate_score</code><span class="sig-paren">(</span><em class="sig-param">model_results</em>, <em class="sig-param">metric_weighting: dict = {}</em>, <em class="sig-param">prediction_interval: float = 0.9</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.generate_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate score based on relative accuracies.</p>
<p>SMAPE - smaller is better
MAE - smaller is better
RMSE -  smaller is better
MADE - smaller is better
MLE - smaller is better
MAGE - smaller is better
SPL - smaller is better
Contour - bigger is better (is 0 to 1)
Containment - bigger is better (is 0 to 1)
Runtime - smaller is better</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.generate_score_per_series">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">generate_score_per_series</code><span class="sig-paren">(</span><em class="sig-param">results_object</em>, <em class="sig-param">metric_weighting</em>, <em class="sig-param">total_validations=1</em>, <em class="sig-param">models_to_use=None</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.generate_score_per_series" title="Permalink to this definition">¶</a></dt>
<dd><p>Score generation on per_series_metrics for ensembles.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.horizontal_template_to_model_list">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">horizontal_template_to_model_list</code><span class="sig-paren">(</span><em class="sig-param">template</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.horizontal_template_to_model_list" title="Permalink to this definition">¶</a></dt>
<dd><p>helper function to take template dataframe of ensembles to a single list of models.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.model_forecast">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">model_forecast</code><span class="sig-paren">(</span><em class="sig-param">model_name, model_param_dict, model_transform_dict, df_train, forecast_length: int, frequency: str = 'infer', prediction_interval: float = 0.9, no_negatives: bool = False, constraint: float = None, future_regressor_train=None, future_regressor_forecast=None, holiday_country: str = 'US', startTimeStamps=None, grouping_ids=None, fail_on_forecast_nan: bool = True, random_seed: int = 2020, verbose: int = 0, n_jobs: int = 'auto', template_cols: list = ['Model', 'ModelParameters', 'TransformationParameters', 'Ensemble'], horizontal_subset: list = None, return_model: bool = False, current_model_file: str = None, **kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.model_forecast" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes numeric data, returns numeric forecasts.</p>
<p>Only one model (albeit potentially an ensemble)!
Horizontal ensembles can not be nested, other ensemble types can be.</p>
<p>Well, she turned me into a newt.
A newt?
I got better. -Python</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> (<em>str</em>) – a string to be direct to the appropriate model, used in ModelMonster</p></li>
<li><p><strong>model_param_dict</strong> (<em>dict</em>) – dictionary of parameters to be passed into the model.</p></li>
<li><p><strong>model_transform_dict</strong> (<em>dict</em>) – a dictionary of fillNA and transformation methods to be used
pass an empty dictionary if no transformations are desired.</p></li>
<li><p><strong>df_train</strong> (<em>pandas.DataFrame</em>) – numeric training dataset of DatetimeIndex and series as cols</p></li>
<li><p><strong>forecast_length</strong> (<em>int</em>) – number of periods to forecast</p></li>
<li><p><strong>frequency</strong> (<em>str</em>) – str representing frequency alias of time series</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – width of errors (note: rarely do the intervals accurately match the % asked for…)</p></li>
<li><p><strong>no_negatives</strong> (<em>bool</em>) – whether to force all forecasts to be &gt; 0</p></li>
<li><p><strong>constraint</strong> (<em>float</em>) – when not None, use this value * data st dev above max or below min for constraining forecast values.</p></li>
<li><p><strong>future_regressor_train</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching train data</p></li>
<li><p><strong>future_regressor_forecast</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching test data</p></li>
<li><p><strong>holiday_country</strong> (<em>str</em>) – passed through to holiday package, used by a few models as 0/1 regressor.</p></li>
<li><p><strong>n_jobs</strong> (<em>int</em>) – number of CPUs to use when available.</p></li>
<li><p><strong>template_cols</strong> (<em>list</em>) – column names of columns used as model template</p></li>
<li><p><strong>horizontal_subset</strong> (<em>list</em>) – columns of df_train to use for forecast, meant for internal use for horizontal ensembling</p></li>
<li><p><strong>fail_on_forecast_nan</strong> (<em>bool</em>) – if False, return forecasts even if NaN present, if True, raises error if any nan in forecast. True is recommended.</p></li>
<li><p><strong>return_model</strong> (<em>bool</em>) – if True, forecast will have .model and .tranformer attributes set to model object. Only works for non-ensembles.</p></li>
<li><p><strong>current_model_file</strong> (<em>str</em>) – file path to write to disk of current model params (for debugging if computer crashes). .json is appended</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Prediction from AutoTS model object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="autots.models.html#autots.models.base.PredictionObject" title="autots.models.base.PredictionObject">PredictionObject</a> (autots.PredictionObject)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.model_list_to_dict">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">model_list_to_dict</code><span class="sig-paren">(</span><em class="sig-param">model_list</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.model_list_to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert various possibilities to dict.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.remove_leading_zeros">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">remove_leading_zeros</code><span class="sig-paren">(</span><em class="sig-param">df</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.remove_leading_zeros" title="Permalink to this definition">¶</a></dt>
<dd><p>Accepts wide dataframe, returns dataframe with zeroes preceeding any non-zero value as NaN.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.trans_dict_recomb">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">trans_dict_recomb</code><span class="sig-paren">(</span><em class="sig-param">dict_array</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.trans_dict_recomb" title="Permalink to this definition">¶</a></dt>
<dd><p>Recombine two transformation param dictionaries from array of dicts.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.unpack_ensemble_models">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">unpack_ensemble_models</code><span class="sig-paren">(</span><em class="sig-param">template, template_cols: list = ['Model', 'ModelParameters', 'TransformationParameters', 'Ensemble'], keep_ensemble: bool = True, recursive: bool = False</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.unpack_ensemble_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Take ensemble models from template and add as new rows.
Some confusion may exist as Ensembles require both ‘Ensemble’ column &gt; 0 and model name ‘Ensemble’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>pd.DataFrame</em>) – AutoTS template containing template_cols</p></li>
<li><p><strong>keep_ensemble</strong> (<em>bool</em>) – if False, drop row containing original ensemble</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – if True, unnest ensembles of ensembles…</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_model.validation_aggregation">
<code class="sig-prename descclassname">autots.evaluator.auto_model.</code><code class="sig-name descname">validation_aggregation</code><span class="sig-paren">(</span><em class="sig-param">validation_results</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.validation_aggregation" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate a TemplateEvalObject.</p>
</dd></dl>

</section>
<section id="module-autots.evaluator.auto_ts">
<span id="autots-evaluator-auto-ts-module"></span><h2>autots.evaluator.auto_ts module<a class="headerlink" href="#module-autots.evaluator.auto_ts" title="Permalink to this headline">¶</a></h2>
<p>Higher-level functions of automated time series modeling.</p>
<dl class="class">
<dt id="autots.evaluator.auto_ts.AutoTS">
<em class="property">class </em><code class="sig-prename descclassname">autots.evaluator.auto_ts.</code><code class="sig-name descname">AutoTS</code><span class="sig-paren">(</span><em class="sig-param">forecast_length: int = 14</em>, <em class="sig-param">frequency: str = 'infer'</em>, <em class="sig-param">prediction_interval: float = 0.9</em>, <em class="sig-param">max_generations: int = 10</em>, <em class="sig-param">no_negatives: bool = False</em>, <em class="sig-param">constraint: float = None</em>, <em class="sig-param">ensemble: str = 'auto'</em>, <em class="sig-param">initial_template: str = 'General+Random'</em>, <em class="sig-param">random_seed: int = 2022</em>, <em class="sig-param">holiday_country: str = 'US'</em>, <em class="sig-param">subset: int = None</em>, <em class="sig-param">aggfunc: str = 'first'</em>, <em class="sig-param">na_tolerance: float = 1</em>, <em class="sig-param">metric_weighting: dict = {'containment_weighting': 0</em>, <em class="sig-param">'contour_weighting': 1</em>, <em class="sig-param">'imle_weighting': 0</em>, <em class="sig-param">'made_weighting': 0.5</em>, <em class="sig-param">'mae_weighting': 2</em>, <em class="sig-param">'mage_weighting': 0</em>, <em class="sig-param">'mle_weighting': 0</em>, <em class="sig-param">'oda_weighting': 0.001</em>, <em class="sig-param">'rmse_weighting': 2</em>, <em class="sig-param">'runtime_weighting': 0.05</em>, <em class="sig-param">'smape_weighting': 5</em>, <em class="sig-param">'spl_weighting': 3}</em>, <em class="sig-param">drop_most_recent: int = 0</em>, <em class="sig-param">drop_data_older_than_periods: int = 100000</em>, <em class="sig-param">model_list: str = 'default'</em>, <em class="sig-param">transformer_list: dict = 'auto'</em>, <em class="sig-param">transformer_max_depth: int = 6</em>, <em class="sig-param">models_mode: str = 'random'</em>, <em class="sig-param">num_validations: int = 'auto'</em>, <em class="sig-param">models_to_validate: float = 0.15</em>, <em class="sig-param">max_per_model_class: int = None</em>, <em class="sig-param">validation_method: str = 'backwards'</em>, <em class="sig-param">min_allowed_train_percent: float = 0.5</em>, <em class="sig-param">remove_leading_zeroes: bool = False</em>, <em class="sig-param">prefill_na: str = None</em>, <em class="sig-param">introduce_na: bool = None</em>, <em class="sig-param">preclean: dict = None</em>, <em class="sig-param">model_interrupt: bool = True</em>, <em class="sig-param">current_model_file: str = None</em>, <em class="sig-param">verbose: int = 1</em>, <em class="sig-param">n_jobs: int = -2</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Automate time series modeling using a genetic algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>forecast_length</strong> (<em>int</em>) – number of periods over which to evaluate forecast. Can be overriden later in .predict().</p></li>
<li><p><strong>frequency</strong> (<em>str</em>) – ‘infer’ or a specific pandas datetime offset. Can be used to force rollup of data (ie daily input, but frequency ‘M’ will rollup to monthly).</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – 0-1, uncertainty range for upper and lower forecasts. Adjust range, but rarely matches actual containment.</p></li>
<li><p><strong>max_generations</strong> (<em>int</em>) – number of genetic algorithms generations to run.
More runs = longer runtime, generally better accuracy.
It’s called <cite>max</cite> because someday there will be an auto early stopping option, but for now this is just the exact number of generations to run.</p></li>
<li><p><strong>no_negatives</strong> (<em>bool</em>) – if True, all negative predictions are rounded up to 0.</p></li>
<li><p><strong>constraint</strong> (<em>float</em>) – <p>when not None, use this float value * data st dev above max or below min for constraining forecast values.
now also instead accepts a dictionary containing the following key/values:</p>
<blockquote>
<div><dl class="simple">
<dt>constraint_method (str): one of</dt><dd><p>stdev_min - threshold is min and max of historic data +/- constraint * st dev of data
stdev - threshold is the mean of historic data +/- constraint * st dev of data
absolute - input is array of length series containing the threshold’s final value for each
quantile - constraint is the quantile of historic data to use as threshold</p>
</dd>
<dt>constraint_regularization (float): 0 to 1</dt><dd><p>where 0 means no constraint, 1 is hard threshold cutoff, and in between is penalty term</p>
</dd>
</dl>
<p>upper_constraint (float): or array, depending on method, None if unused
lower_constraint (float): or array, depending on method, None if unused
bounds (bool): if True, apply to upper/lower forecast, otherwise False applies only to forecast</p>
</div></blockquote>
</p></li>
<li><p><strong>ensemble</strong> (<em>str</em>) – None or list or comma-separated string containing:
‘auto’, ‘simple’, ‘distance’, ‘horizontal’, ‘horizontal-min’, ‘horizontal-max’, “mosaic”, “subsample”</p></li>
<li><p><strong>initial_template</strong> (<em>str</em>) – ‘Random’ - randomly generates starting template, ‘General’ uses template included in package, ‘General+Random’ - both of previous. Also can be overriden with self.import_template()</p></li>
<li><p><strong>random_seed</strong> (<em>int</em>) – random seed allows (slightly) more consistent results.</p></li>
<li><p><strong>holiday_country</strong> (<em>str</em>) – passed through to Holidays package for some models.</p></li>
<li><p><strong>subset</strong> (<em>int</em>) – maximum number of series to evaluate at once. Useful to speed evaluation when many series are input.
takes a new subset of columns on each validation, unless mosaic ensembling, in which case columns are the same in each validation</p></li>
<li><p><strong>aggfunc</strong> (<em>str</em>) – if data is to be rolled up to a higher frequency (daily -&gt; monthly) or duplicate timestamps are included. Default ‘first’ removes duplicates, for rollup try ‘mean’ or np.sum.
Beware numeric aggregations like ‘mean’ will not work with non-numeric inputs.</p></li>
<li><p><strong>na_tolerance</strong> (<em>float</em>) – 0 to 1. Series are dropped if they have more than this percent NaN. 0.95 here would allow series containing up to 95% NaN values.</p></li>
<li><p><strong>metric_weighting</strong> (<em>dict</em>) – weights to assign to metrics, effecting how the ranking score is generated.</p></li>
<li><p><strong>drop_most_recent</strong> (<em>int</em>) – option to drop n most recent data points. Useful, say, for monthly sales data where the current (unfinished) month is included.
occurs after any aggregration is applied, so will be whatever is specified by frequency, will drop n frequencies</p></li>
<li><p><strong>drop_data_older_than_periods</strong> (<em>int</em>) – take only the n most recent timestamps</p></li>
<li><p><strong>model_list</strong> (<em>list</em>) – str alias or list of names of model objects to use
now can be a dictionary of {“model”: prob} but only affects starting random templates. Genetic algorithim takes from there.</p></li>
<li><p><strong>transformer_list</strong> (<em>list</em>) – list of transformers to use, or dict of transformer:probability. Note this does not apply to initial templates.
can accept string aliases: “all”, “fast”, “superfast”</p></li>
<li><p><strong>transformer_max_depth</strong> (<em>int</em>) – maximum number of sequential transformers to generate for new Random Transformers. Fewer will be faster.</p></li>
<li><p><strong>models_mode</strong> (<em>str</em>) – option to adjust parameter options for newly generated models. Currently includes:
‘default’, ‘deep’ (searches more params, likely slower), and ‘regressor’ (forces ‘User’ regressor mode in regressor capable models)</p></li>
<li><p><strong>num_validations</strong> (<em>int</em>) – number of cross validations to perform. 0 for just train/test on best split.
Possible confusion: num_validations is the number of validations to perform <em>after</em> the first eval segment, so totally eval/validations will be this + 1.
Also “auto” and “max” aliases available. Max maxes out at 50.</p></li>
<li><p><strong>models_to_validate</strong> (<em>int</em>) – top n models to pass through to cross validation. Or float in 0 to 1 as % of tried.
0.99 is forced to 100% validation. 1 evaluates just 1 model.
If horizontal or mosaic ensemble, then additional min per_series models above the number here are added to validation.</p></li>
<li><p><strong>max_per_model_class</strong> (<em>int</em>) – of the models_to_validate what is the maximum to pass from any one model class/family.</p></li>
<li><p><strong>validation_method</strong> (<em>str</em>) – ‘even’, ‘backwards’, or ‘seasonal n’ where n is an integer of seasonal
‘backwards’ is better for recency and for shorter training sets
‘even’ splits the data into equally-sized slices best for more consistent data, a poetic but less effective strategy than others here
‘seasonal n’ for example ‘seasonal 364’ would test all data on each previous year of the forecast_length that would immediately follow the training data.
‘similarity’ automatically finds the data sections most similar to the most recent data that will be used for prediction
‘custom’ - if used, .fit() needs validation_indexes passed - a list of pd.DatetimeIndex’s, tail of each is used as test</p></li>
<li><p><strong>min_allowed_train_percent</strong> (<em>float</em>) – percent of forecast length to allow as min training, else raises error.
0.5 with a forecast length of 10 would mean 5 training points are mandated, for a total of 15 points.
Useful in (unrecommended) cases where forecast_length &gt; training length.</p></li>
<li><p><strong>remove_leading_zeroes</strong> (<em>bool</em>) – replace leading zeroes with NaN. Useful in data where initial zeroes mean data collection hasn’t started yet.</p></li>
<li><p><strong>prefill_na</strong> (<em>str</em>) – value to input to fill all NaNs with. Leaving as None and allowing model interpolation is recommended.
None, 0, ‘mean’, or ‘median’. 0 may be useful in for examples sales cases where all NaN can be assumed equal to zero.</p></li>
<li><p><strong>introduce_na</strong> (<em>bool</em>) – whether to force last values in one training validation to be NaN. Helps make more robust models.
defaults to None, which introduces NaN in last rows of validations if any NaN in tail of training data. Will not introduce NaN to all series if subset is used.
if True, will also randomly change 20% of all rows to NaN in the validations</p></li>
<li><p><strong>preclean</strong> (<em>dict</em>) – if not None, a dictionary of Transformer params to be applied to input data
{“fillna”: “median”, “transformations”: {}, “transformation_params”: {}}
This will change data used in model inputs for fit and predict, and for accuracy evaluation in cross validation!</p></li>
<li><p><strong>model_interrupt</strong> (<em>bool</em>) – if False, KeyboardInterrupts quit entire program.
if True, KeyboardInterrupts attempt to only quit current model.
if True, recommend use in conjunction with <cite>verbose</cite> &gt; 0 and <cite>result_file</cite> in the event of accidental complete termination.
if “end_generation”, as True and also ends entire generation of run. Note skipped models will not be tried again.</p></li>
<li><p><strong>current_model_file</strong> (<em>str</em>) – file path to write to disk of current model params (for debugging if computer crashes). .json is appended</p></li>
<li><p><strong>verbose</strong> (<em>int</em>) – setting to 0 or lower should reduce most output. Higher numbers give more output.</p></li>
<li><p><strong>n_jobs</strong> (<em>int</em>) – Number of cores available to pass to parallel processing. A joblib context manager can be used instead (pass None in this case). Also ‘auto’.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="autots.evaluator.auto_ts.AutoTS.best_model">
<code class="sig-name descname">best_model</code><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model" title="Permalink to this definition">¶</a></dt>
<dd><p>DataFrame containing template for the best ranked model</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="autots.evaluator.auto_ts.AutoTS.best_model_name">
<code class="sig-name descname">best_model_name</code><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model_name" title="Permalink to this definition">¶</a></dt>
<dd><p>model name</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="autots.evaluator.auto_ts.AutoTS.best_model_params">
<code class="sig-name descname">best_model_params</code><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model_params" title="Permalink to this definition">¶</a></dt>
<dd><p>model params</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="autots.evaluator.auto_ts.AutoTS.best_model_transformation_params">
<code class="sig-name descname">best_model_transformation_params</code><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model_transformation_params" title="Permalink to this definition">¶</a></dt>
<dd><p>transformation parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="autots.evaluator.auto_ts.AutoTS.best_model_ensemble">
<code class="sig-name descname">best_model_ensemble</code><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model_ensemble" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensemble type int id</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="autots.evaluator.auto_ts.AutoTS.regression_check">
<code class="sig-name descname">regression_check</code><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.regression_check" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, the best_model uses an input ‘User’ future_regressor</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="autots.evaluator.auto_ts.AutoTS.df_wide_numeric">
<code class="sig-name descname">df_wide_numeric</code><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.df_wide_numeric" title="Permalink to this definition">¶</a></dt>
<dd><p>dataframe containing shaped final data</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="autots.evaluator.auto_ts.AutoTS.initial_results.model_results">
<code class="sig-prename descclassname">initial_results.</code><code class="sig-name descname">model_results</code><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.initial_results.model_results" title="Permalink to this definition">¶</a></dt>
<dd><p>contains a collection of result metrics</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="autots.evaluator.auto_ts.AutoTS.score_per_series">
<code class="sig-name descname">score_per_series</code><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.score_per_series" title="Permalink to this definition">¶</a></dt>
<dd><p>generated score of metrics given per input series, if horizontal ensembles</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">fit, predict</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">export_template, import_template, import_results</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">results, failure_rate</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">horizontal_to_df, mosaic_to_df</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">plot_horizontal, plot_horizontal_transformers, plot_generation_loss, plot_backforecast</code></dt>
<dd></dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.back_forecast">
<code class="sig-name descname">back_forecast</code><span class="sig-paren">(</span><em class="sig-param">column=None</em>, <em class="sig-param">n_splits: int = 3</em>, <em class="sig-param">tail: int = None</em>, <em class="sig-param">verbose: int = 0</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.back_forecast" title="Permalink to this definition">¶</a></dt>
<dd><p>Create forecasts for the historical training data, ie. backcast or back forecast.</p>
<p>This actually forecasts on historical data, these are not fit model values as are often returned by other packages.
As such, this will be slower, but more representative of real world model performance.
There may be jumps in data between chunks.</p>
<p>Args are same as for model_forecast except…
n_splits(int): how many pieces to split data into. Pass 2 for fastest, or “auto” for best accuracy
column (str): if to run on only one column, pass column name. Faster than full.
tail (int): df.tail() of the dataset, back_forecast is only run on n most recent observations.</p>
<blockquote>
<div><p>which points at eval_periods of lower-level back_forecast function</p>
</div></blockquote>
<p>Returns a standard prediction object (access .forecast, .lower_forecast, .upper_forecast)</p>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.export_template">
<code class="sig-name descname">export_template</code><span class="sig-paren">(</span><em class="sig-param">filename=None</em>, <em class="sig-param">models: str = 'best'</em>, <em class="sig-param">n: int = 20</em>, <em class="sig-param">max_per_model_class: int = None</em>, <em class="sig-param">include_results: bool = False</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.export_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Export top results as a reusable template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – ‘csv’ or ‘json’ (in filename).
<cite>None</cite> to return a dataframe and not write a file.</p></li>
<li><p><strong>models</strong> (<em>str</em>) – ‘best’ or ‘all’</p></li>
<li><p><strong>n</strong> (<em>int</em>) – if models = ‘best’, how many n-best to export</p></li>
<li><p><strong>max_per_model_class</strong> (<em>int</em>) – if models = ‘best’,
the max number of each model class to include in template</p></li>
<li><p><strong>include_results</strong> (<em>bool</em>) – whether to include performance metrics</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.failure_rate">
<code class="sig-name descname">failure_rate</code><span class="sig-paren">(</span><em class="sig-param">result_set: str = 'initial'</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.failure_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Return fraction of models passing with exceptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result_set</strong> (<em>str</em><em>, </em><em>optional</em>) – ‘validation’ or ‘initial’. Defaults to ‘initial’.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>float.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">date_col: str = None</em>, <em class="sig-param">value_col: str = None</em>, <em class="sig-param">id_col: str = None</em>, <em class="sig-param">future_regressor=None</em>, <em class="sig-param">weights: dict = {}</em>, <em class="sig-param">result_file: str = None</em>, <em class="sig-param">grouping_ids=None</em>, <em class="sig-param">validation_indexes: list = None</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Train algorithm given data supplied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Datetime Indexed dataframe of series, or dataframe of three columns as below.</p></li>
<li><p><strong>date_col</strong> (<em>str</em>) – name of datetime column</p></li>
<li><p><strong>value_col</strong> (<em>str</em>) – name of column containing the data of series.</p></li>
<li><p><strong>id_col</strong> (<em>str</em>) – name of column identifying different series.</p></li>
<li><p><strong>future_regressor</strong> (<em>numpy.Array</em>) – single external regressor matching train.index</p></li>
<li><p><strong>weights</strong> (<em>dict</em>) – {‘colname1’: 2, ‘colname2’: 5} - increase importance of a series in metric evaluation. Any left blank assumed to have weight of 1.
pass the alias ‘mean’ as a str ie <cite>weights=’mean’</cite> to automatically use the mean value of a series as its weight
available aliases: mean, median, min, max</p></li>
<li><p><strong>result_file</strong> (<em>str</em>) – results saved on each new generation. Does not include validation rounds.
“.csv” save model results table.
“.pickle” saves full object, including ensemble information.</p></li>
<li><p><strong>grouping_ids</strong> (<em>dict</em>) – currently a one-level dict containing series_id:group_id mapping.
used in 0.2.x but not 0.3.x+ versions. retained for potential future use</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.horizontal_per_generation">
<code class="sig-name descname">horizontal_per_generation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.horizontal_per_generation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.horizontal_to_df">
<code class="sig-name descname">horizontal_to_df</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.horizontal_to_df" title="Permalink to this definition">¶</a></dt>
<dd><p>helper function for plotting.</p>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.import_results">
<code class="sig-name descname">import_results</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.import_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Add results from another run on the same data.</p>
<p>Input can be filename with .csv or .pickle.
or can be a DataFrame of model results or a full TemplateEvalObject</p>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.import_template">
<code class="sig-name descname">import_template</code><span class="sig-paren">(</span><em class="sig-param">filename: str</em>, <em class="sig-param">method: str = 'add_on'</em>, <em class="sig-param">enforce_model_list: bool = True</em>, <em class="sig-param">include_ensemble: bool = False</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.import_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a previously exported template of model parameters.
Must be done before the AutoTS object is .fit().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – file location (or a pd.DataFrame already loaded)</p></li>
<li><p><strong>method</strong> (<em>str</em>) – ‘add_on’ or ‘only’ - “add_on” keeps <cite>initial_template</cite> generated in init. “only” uses only this template.</p></li>
<li><p><strong>enforce_model_list</strong> (<em>bool</em>) – if True, remove model types not in model_list</p></li>
<li><p><strong>include_ensemble</strong> (<em>bool</em>) – if enforce_model_list is True, this specifies whether to allow ensembles anyway (otherwise they are unpacked and parts kept)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.list_failed_model_types">
<code class="sig-name descname">list_failed_model_types</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.list_failed_model_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of model types (ie ETS, LastValueNaive) that failed.
If all had at least one success, then return an empty list.</p>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.mosaic_to_df">
<code class="sig-name descname">mosaic_to_df</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.mosaic_to_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to create a readable df of models in mosaic.</p>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.plot_backforecast">
<code class="sig-name descname">plot_backforecast</code><span class="sig-paren">(</span><em class="sig-param">series=None</em>, <em class="sig-param">n_splits: int = 3</em>, <em class="sig-param">start_date=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_backforecast" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the historical data and fit forecast on historic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> (<em>str</em><em> or </em><em>list</em>) – column names of time series</p></li>
<li><p><strong>n_splits</strong> (<em>int</em><em> or </em><em>str</em>) – “auto”, number &gt; 2, higher more accurate but slower</p></li>
<li><p><strong>passed to pd.DataFrame.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.plot_generation_loss">
<code class="sig-name descname">plot_generation_loss</code><span class="sig-paren">(</span><em class="sig-param">title='Single Model Accuracy Gain Over Generations'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_generation_loss" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot improvement in accuracy over generations.
Note: this is only “one size fits all” accuracy and
doesn’t account for the benefits seen for ensembling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>passed to pd.DataFrame.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.plot_horizontal">
<code class="sig-name descname">plot_horizontal</code><span class="sig-paren">(</span><em class="sig-param">max_series: int = 20</em>, <em class="sig-param">title='Model Types Chosen by Series'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_horizontal" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple plot to visualize assigned series: models.</p>
<p>Note that for ‘mosaic’ ensembles, it only plots the type of the most common model_id for that series, or the first if all are mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_series</strong> (<em>int</em>) – max number of points to plot</p></li>
<li><p><strong>passed to pandas.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.plot_horizontal_per_generation">
<code class="sig-name descname">plot_horizontal_per_generation</code><span class="sig-paren">(</span><em class="sig-param">title='Horizontal Ensemble Model Accuracy Gain Over Generations'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_horizontal_per_generation" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot how well the horizontal ensembles would do after each new generation. Slow.</p>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.plot_horizontal_transformers">
<code class="sig-name descname">plot_horizontal_transformers</code><span class="sig-paren">(</span><em class="sig-param">method='transformers'</em>, <em class="sig-param">color_list=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_horizontal_transformers" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple plot to visualize transformers used.
Note this doesn’t capture transformers nested in simple ensembles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>str</em>) – ‘fillna’ or ‘transformers’ - which to plot</p></li>
<li><p><strong>= list of colors to sample for bar colors. Can be names</strong><strong> or </strong><strong>hex.</strong> (<em>color_list</em>) – </p></li>
<li><p><strong>passed to pandas.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.plot_per_series_error">
<code class="sig-name descname">plot_per_series_error</code><span class="sig-paren">(</span><em class="sig-param">title: str = 'Top Series Contributing Score Error'</em>, <em class="sig-param">max_series: int = 10</em>, <em class="sig-param">max_name_chars: int = 25</em>, <em class="sig-param">color: str = '#ff9912'</em>, <em class="sig-param">figsize=(12</em>, <em class="sig-param">4)</em>, <em class="sig-param">kind: str = 'bar'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_per_series_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot which series are contributing most to error (Score) of final model. Avg of validations for best_model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – plot title</p></li>
<li><p><strong>max_series</strong> (<em>int</em>) – max number of series to show on plot (sorted)</p></li>
<li><p><strong>max_name_chars</strong> (<em>str</em>) – if horizontal ensemble, will chop series names to this</p></li>
<li><p><strong>color</strong> (<em>str</em>) – hex or name of color of plot</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em>) – passed through to plot axis</p></li>
<li><p><strong>kind</strong> (<em>str</em>) – bar or pie</p></li>
<li><p><strong>passed to pandas.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.plot_per_series_smape">
<code class="sig-name descname">plot_per_series_smape</code><span class="sig-paren">(</span><em class="sig-param">title: str = 'Top Series Contributing SMAPE Error'</em>, <em class="sig-param">max_series: int = 10</em>, <em class="sig-param">max_name_chars: int = 25</em>, <em class="sig-param">color: str = '#ff9912'</em>, <em class="sig-param">figsize=(12</em>, <em class="sig-param">4)</em>, <em class="sig-param">kind: str = 'bar'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_per_series_smape" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot which series are contributing most to SMAPE of final model. Avg of validations for best_model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – plot title</p></li>
<li><p><strong>max_series</strong> (<em>int</em>) – max number of series to show on plot (sorted)</p></li>
<li><p><strong>max_name_chars</strong> (<em>str</em>) – if horizontal ensemble, will chop series names to this</p></li>
<li><p><strong>color</strong> (<em>str</em>) – hex or name of color of plot</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em>) – passed through to plot axis</p></li>
<li><p><strong>kind</strong> (<em>str</em>) – bar or pie</p></li>
<li><p><strong>passed to pandas.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.predict">
<code class="sig-name descname">predict</code><span class="sig-paren">(</span><em class="sig-param">forecast_length: int = 'self'</em>, <em class="sig-param">prediction_interval: float = 'self'</em>, <em class="sig-param">future_regressor=None</em>, <em class="sig-param">hierarchy=None</em>, <em class="sig-param">just_point_forecast: bool = False</em>, <em class="sig-param">fail_on_forecast_nan: bool = True</em>, <em class="sig-param">verbose: int = 'self'</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate forecast data immediately following dates of index supplied to .fit().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>forecast_length</strong> (<em>int</em>) – Number of periods of data to forecast ahead</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – <p>interval of upper/lower forecasts.
defaults to ‘self’ ie the interval specified in __init__()
if prediction_interval is a list, then returns a dict of forecast objects.</p>
<blockquote>
<div><p>{str(interval): prediction_object}</p>
</div></blockquote>
</p></li>
<li><p><strong>future_regressor</strong> (<em>numpy.Array</em>) – additional regressor</p></li>
<li><p><strong>hierarchy</strong> – Not yet implemented</p></li>
<li><p><strong>just_point_forecast</strong> (<em>bool</em>) – If True, return a pandas.DataFrame of just point forecasts</p></li>
<li><p><strong>fail_on_forecast_nan</strong> (<em>bool</em>) – if False, return forecasts even if NaN present, if True, raises error if any nan in forecast</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either a PredictionObject of forecasts and metadata, or
if just_point_forecast == True, a dataframe of point forecasts</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTS.results">
<code class="sig-name descname">results</code><span class="sig-paren">(</span><em class="sig-param">result_set: str = 'initial'</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.results" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to return tested models table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result_set</strong> (<em>str</em>) – ‘validation’ or ‘initial’</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="autots.evaluator.auto_ts.AutoTSIntervals">
<em class="property">class </em><code class="sig-prename descclassname">autots.evaluator.auto_ts.</code><code class="sig-name descname">AutoTSIntervals</code><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTSIntervals" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Autots looped to test multiple prediction intervals. Experimental.</p>
<p>Runs max_generations on first prediction interval, then validates on remainder.
Most args are passed through to AutoTS().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interval_models_to_validate</strong> (<em>int</em>) – number of models to validate on each prediction interval.</p></li>
<li><p><strong>import_results</strong> (<em>str</em>) – results from run on same data to load, <cite>filename.pickle</cite>.
Currently result_file and import only save/load initial run, no validations.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTSIntervals.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">prediction_intervals</em>, <em class="sig-param">forecast_length</em>, <em class="sig-param">df_long</em>, <em class="sig-param">max_generations</em>, <em class="sig-param">num_validations</em>, <em class="sig-param">validation_method</em>, <em class="sig-param">models_to_validate</em>, <em class="sig-param">interval_models_to_validate</em>, <em class="sig-param">date_col</em>, <em class="sig-param">value_col</em>, <em class="sig-param">id_col=None</em>, <em class="sig-param">import_template=None</em>, <em class="sig-param">import_method='only'</em>, <em class="sig-param">import_results=None</em>, <em class="sig-param">result_file=None</em>, <em class="sig-param">model_list='all'</em>, <em class="sig-param">metric_weighting: dict = {'containment_weighting': 0</em>, <em class="sig-param">'contour_weighting': 0</em>, <em class="sig-param">'mae_weighting': 0</em>, <em class="sig-param">'rmse_weighting': 1</em>, <em class="sig-param">'runtime_weighting': 0</em>, <em class="sig-param">'smape_weighting': 1</em>, <em class="sig-param">'spl_weighting': 10}</em>, <em class="sig-param">weights: dict = {}</em>, <em class="sig-param">grouping_ids=None</em>, <em class="sig-param">future_regressor=None</em>, <em class="sig-param">model_interrupt: bool = False</em>, <em class="sig-param">constraint=2</em>, <em class="sig-param">no_negatives=False</em>, <em class="sig-param">remove_leading_zeroes=False</em>, <em class="sig-param">random_seed=2020</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTSIntervals.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Train and find best.</p>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.auto_ts.AutoTSIntervals.predict">
<code class="sig-name descname">predict</code><span class="sig-paren">(</span><em class="sig-param">future_regressor=None</em>, <em class="sig-param">verbose: int = 'self'</em><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#autots.evaluator.auto_ts.AutoTSIntervals.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate forecasts after training complete.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_ts.error_correlations">
<code class="sig-prename descclassname">autots.evaluator.auto_ts.</code><code class="sig-name descname">error_correlations</code><span class="sig-paren">(</span><em class="sig-param">all_result</em>, <em class="sig-param">result: str = 'corr'</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.error_correlations" title="Permalink to this definition">¶</a></dt>
<dd><p>Onehot encode AutoTS result df and return df or correlation with errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>all_results</strong> (<em>pandas.DataFrame</em>) – AutoTS model_results df</p></li>
<li><p><strong>result</strong> (<em>str</em>) – whether to return ‘df’, ‘corr’, ‘poly corr’ with errors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.auto_ts.fake_regressor">
<code class="sig-prename descclassname">autots.evaluator.auto_ts.</code><code class="sig-name descname">fake_regressor</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">forecast_length: int = 14</em>, <em class="sig-param">date_col: str = None</em>, <em class="sig-param">value_col: str = None</em>, <em class="sig-param">id_col: str = None</em>, <em class="sig-param">frequency: str = 'infer'</em>, <em class="sig-param">aggfunc: str = 'first'</em>, <em class="sig-param">drop_most_recent: int = 0</em>, <em class="sig-param">na_tolerance: float = 0.95</em>, <em class="sig-param">drop_data_older_than_periods: int = 100000</em>, <em class="sig-param">dimensions: int = 1</em>, <em class="sig-param">verbose: int = 0</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.fake_regressor" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a fake regressor of random numbers for testing purposes.</p>
</dd></dl>

</section>
<section id="module-autots.evaluator.benchmark">
<span id="autots-evaluator-benchmark-module"></span><h2>autots.evaluator.benchmark module<a class="headerlink" href="#module-autots.evaluator.benchmark" title="Permalink to this headline">¶</a></h2>
<p>Created on Fri Nov  5 13:45:01 2021</p>
<p>&#64;author: Colin</p>
<dl class="class">
<dt id="autots.evaluator.benchmark.Benchmark">
<em class="property">class </em><code class="sig-prename descclassname">autots.evaluator.benchmark.</code><code class="sig-name descname">Benchmark</code><a class="headerlink" href="#autots.evaluator.benchmark.Benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="autots.evaluator.benchmark.Benchmark.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">n_jobs: int = 'auto'</em>, <em class="sig-param">times: int = 3</em>, <em class="sig-param">random_seed: int = 123</em>, <em class="sig-param">base_models_only=False</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.benchmark.Benchmark.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run benchmark.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_jobs</strong> (<em>int</em>) – passed to model_forecast for n cpus</p></li>
<li><p><strong>times</strong> (<em>int</em>) – number of times to run benchmark models (returns avg of n times)</p></li>
<li><p><strong>random_seed</strong> (<em>int</em>) – random seed, increases consistency</p></li>
<li><p><strong>base_models_only</strong> (<em>bool</em>) – if True, doesn’t attempt Tensorflow, GluonTS, or Prophet models</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-autots.evaluator.event_forecasting">
<span id="autots-evaluator-event-forecasting-module"></span><h2>autots.evaluator.event_forecasting module<a class="headerlink" href="#module-autots.evaluator.event_forecasting" title="Permalink to this headline">¶</a></h2>
<p>Generate probabilities of forecastings crossing limit thresholds.
Created on Thu Jan 27 13:36:18 2022</p>
<dl class="class">
<dt id="autots.evaluator.event_forecasting.EventRiskForecast">
<em class="property">class </em><code class="sig-prename descclassname">autots.evaluator.event_forecasting.</code><code class="sig-name descname">EventRiskForecast</code><span class="sig-paren">(</span><em class="sig-param">df_train</em>, <em class="sig-param">forecast_length</em>, <em class="sig-param">frequency: str = 'infer'</em>, <em class="sig-param">prediction_interval=0.9</em>, <em class="sig-param">lower_limit=0.05</em>, <em class="sig-param">upper_limit=0.95</em>, <em class="sig-param">model_name='UnivariateMotif'</em>, <em class="sig-param">model_param_dict={'distance_metric': 'euclidean'</em>, <em class="sig-param">'k': 10</em>, <em class="sig-param">'pointed_method': 'median'</em>, <em class="sig-param">'return_result_windows': True</em>, <em class="sig-param">'window': 14}</em>, <em class="sig-param">model_transform_dict={'fillna': 'pchip'</em>, <em class="sig-param">'transformation_params': {'0': {'method': 0.5}</em>, <em class="sig-param">'1': {}</em>, <em class="sig-param">'2': {'fixed': False</em>, <em class="sig-param">'window': 7}</em>, <em class="sig-param">'3': {}}</em>, <em class="sig-param">'transformations': {'0': 'Slice'</em>, <em class="sig-param">'1': 'DifferencedTransformer'</em>, <em class="sig-param">'2': 'RollingMeanTransformer'</em>, <em class="sig-param">'3': 'MaxAbsScaler'}}</em>, <em class="sig-param">model_forecast_kwargs={'max_generations': 30</em>, <em class="sig-param">'n_jobs': 'auto'</em>, <em class="sig-param">'random_seed': 321</em>, <em class="sig-param">'verbose': 1}</em>, <em class="sig-param">future_regressor_train=None</em>, <em class="sig-param">future_regressor_forecast=None</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generate a risk score (0 to 1, but usually close to 0) for a future event exceeding user specified upper or lower bounds.</p>
<p>Upper and lower limits can be one of four types, and may each be different.
1. None (no risk score calculated for this direction)
2. Float in range [0, 1] historic quantile of series (which is historic min and max at edges) is chosen as limit.
3. A dictionary of {“model_name”: x,  “model_param_dict”: y, “model_transform_dict”: z, “prediction_interval”: 0.9} to generate a forecast as the limits</p>
<blockquote>
<div><p>Primarily intended for simple forecasts like SeasonalNaive, but can be used with any AutoTS model</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>a custom input numpy array of shape (forecast_length, num_series)</p></li>
</ol>
<p>This can be used to find the “middle” limit too, flip so upper=lower and lower=upper, then abs(U - (1 - L)).
In some cases it may help to drop the results from the first forecast timestep or two.</p>
<p>This functions by generating multiple outcome forecast possiblities in two ways.
If a ‘Motif’ type model is passed, it uses all the k neighbors motifs as outcome paths (recommended)
All other AutoTS models will generate the possible outcomes by utilizing multiple prediction_intervals (more intervals = slower but more resolution).
The risk score is then the % of outcome forecasts which cross the limit.
(less than or equal for lower, greater than or equal for upper)</p>
<p>Only accepts <cite>wide</cite> style dataframe input.
Methods are class_methods and can be used standalone. They default to __init__ inputs, but can be overriden.
Results are usually a numpy array of shape (forecast_length, num_series)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_train</strong> (<em>pd.DataFrame</em>) – <a href="#system-message-1"><span class="problematic" id="problematic-1">`</span></a>wide style data, pd.DatetimeIndex for index and one series per column</p></li>
<li><p><strong>forecast_length</strong> (<em>int</em>) – number of forecast steps to make</p></li>
<li><p><strong>frequency</strong> (<em>str</em>) – frequency of timesteps</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – float or list of floats for probabilistic forecasting
if a list, the first item in the list is the one used for .fit default</p></li>
<li><p><strong>model_forecast_kwargs</strong> (<em>dict</em>) – AutoTS kwargs to pass to generaet_result_windows, .fit_forecast, and forecast-style limits</p></li>
<li><p><strong>model_param_dict</strong><strong>, </strong><strong>model_transform_dict</strong> (<em>model_name</em><em>,</em>) – for model_forecast in generate_result_windows</p></li>
<li><p><strong>future_regressor_forecast</strong> (<em>future_regressor_train</em><em>,</em>) – regressor arrays if used</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="autots.evaluator.event_forecasting.EventRiskForecast.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="autots.evaluator.event_forecasting.EventRiskForecast.predict">
<code class="sig-name descname">predict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.predict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="autots.evaluator.event_forecasting.EventRiskForecast.predict_historic">
<code class="sig-name descname">predict_historic</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.predict_historic" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="autots.evaluator.event_forecasting.EventRiskForecast.generate_result_windows">
<code class="sig-name descname">generate_result_windows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.generate_result_windows" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="autots.evaluator.event_forecasting.EventRiskForecast.generate_risk_array">
<code class="sig-name descname">generate_risk_array</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.generate_risk_array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="autots.evaluator.event_forecasting.EventRiskForecast.generate_historic_risk_array">
<code class="sig-name descname">generate_historic_risk_array</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.generate_historic_risk_array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="autots.evaluator.event_forecasting.EventRiskForecast.set_limit">
<code class="sig-name descname">set_limit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.set_limit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="autots.evaluator.event_forecasting.EventRiskForecast.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">result_windows, forecast_df, up_forecast_df, low_forecast_df</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">lower_limit_2d, upper_limit_2d, upper_risk_array, lower_risk_array</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">df_train=None, forecast_length=None, prediction_interval=None, models_mode='event_risk', model_list=['UnivariateMotif', 'MultivariateMotif', 'SectionalMotif', 'ARCH'], ensemble=None, autots_kwargs=None, future_regressor_train=None</em><span class="sig-paren">)</span></dt>
<dd><p>Shortcut for generating model params.</p>
<p>args specified are those suggested for an otherwise normal AutoTS run</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_train</strong> (<em>pd.DataFrame</em>) – wide style only</p></li>
<li><p><strong>model_method</strong> (<em>str</em>) – event_risk here is used by motif models</p></li>
<li><p><strong>model_list</strong> (<em>list</em>) – suggesting the use of motif models</p></li>
<li><p><strong>ensemble</strong> (<em>list</em>) – must be None or empty list to get motif result windows</p></li>
<li><p><strong>autots_kwargs</strong> (<em>dict</em>) – all other args passed in as kwargs
if None, defaults to class model_forecast_kwargs, for blank pass empty dict</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<em class="property">static </em><code class="sig-name descname">generate_historic_risk_array</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">limit</em>, <em class="sig-param">direction='upper'</em><span class="sig-paren">)</span></dt>
<dd><p>Given a df and a limit, returns a 0/1 array of whether limit was equaled or exceeded.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">generate_result_windows</code><span class="sig-paren">(</span><em class="sig-param">df_train=None</em>, <em class="sig-param">forecast_length=None</em>, <em class="sig-param">frequency=None</em>, <em class="sig-param">prediction_interval=None</em>, <em class="sig-param">model_name=None</em>, <em class="sig-param">model_param_dict=None</em>, <em class="sig-param">model_transform_dict=None</em>, <em class="sig-param">model_forecast_kwargs=None</em>, <em class="sig-param">future_regressor_train=None</em>, <em class="sig-param">future_regressor_forecast=None</em><span class="sig-paren">)</span></dt>
<dd><p>For event risk forecasting. Params default to class init but can be overridden here.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>(num_samples/k, forecast_length, num_series/columns)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>result_windows (numpy.array)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<em class="property">static </em><code class="sig-name descname">generate_risk_array</code><span class="sig-paren">(</span><em class="sig-param">result_windows</em>, <em class="sig-param">limit</em>, <em class="sig-param">direction='upper'</em><span class="sig-paren">)</span></dt>
<dd><p>Given a df and a limit, returns a 0/1 array of whether limit was equaled or exceeded.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param">column_idx=0, grays=['#838996', '#c0c0c0', '#dcdcdc', '#a9a9a9', '#808080', '#989898', '#808080', '#757575', '#696969', '#c9c0bb', '#c8c8c8', '#323232', '#e5e4e2', '#778899', '#4f666a', '#848482', '#414a4c', '#8a7f80', '#c4c3d0', '#bebebe', '#dbd7d2'], up_low_color=['#ff4500', '#ff5349'], bar_color='#6495ED', bar_ylim=[0.0, 0.5], figsize=(14, 8), result_windows=None, lower_limit_2d=None, upper_limit_2d=None, upper_risk_array=None, lower_risk_array=None</em><span class="sig-paren">)</span></dt>
<dd><p>Plot a sample of the risk forecast outcomes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column_idx</strong> (<em>int</em>) – positional index of series to sample for plot</p></li>
<li><p><strong>grays</strong> (<em>list of str</em>) – list of hex codes for colors for the potential forecasts</p></li>
<li><p><strong>up_low_colors</strong> (<em>list of str</em>) – two hex code colors for lower and upper</p></li>
<li><p><strong>bar_color</strong> (<em>str</em>) – hex color for bar graph</p></li>
<li><p><strong>bar_ylim</strong> (<em>list</em>) – passed to ylim of plot, sets scale of axis of barplot</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em>) – passed to figsize of output figure</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="autots.evaluator.event_forecasting.EventRiskForecast.plot_eval">
<code class="sig-name descname">plot_eval</code><span class="sig-paren">(</span><em class="sig-param">df_test, column_idx=0, actuals_color=['#00BFFF'], up_low_color=['#ff4500', '#ff5349'], bar_color='#6495ED', bar_ylim=[0.0, 0.5], figsize=(14, 8), lower_limit_2d=None, upper_limit_2d=None, upper_risk_array=None, lower_risk_array=None</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.plot_eval" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a sample of the risk forecast with known value vs risk score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_test</strong> (<em>pd.DataFrame</em>) – dataframe of known values (dt index, series)</p></li>
<li><p><strong>column_idx</strong> (<em>int</em>) – positional index of series to sample for plot</p></li>
<li><p><strong>actuals_color</strong> (<em>list of str</em>) – list of one hex code for line of known actuals</p></li>
<li><p><strong>up_low_colors</strong> (<em>list of str</em>) – two hex code colors for lower and upper</p></li>
<li><p><strong>bar_color</strong> (<em>str</em>) – hex color for bar graph</p></li>
<li><p><strong>bar_ylim</strong> (<em>list</em>) – passed to ylim of plot, sets scale of axis of barplot</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em>) – passed to figsize of output figure</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">predict</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns forecast upper, lower risk probability arrays for input limits.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">predict_historic</code><span class="sig-paren">(</span><em class="sig-param">upper_limit=None</em>, <em class="sig-param">lower_limit=None</em>, <em class="sig-param">eval_periods=None</em><span class="sig-paren">)</span></dt>
<dd><p>Returns upper, lower risk probability arrays for input limits for the historic data.
If manual numpy array limits are used, the limits will need to be appropriate shape (for df_train and eval_periods if used)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>upper_limit</strong> – if different than the version passed to init</p></li>
<li><p><strong>lower_limit</strong> – if different than the version passed to init</p></li>
<li><p><strong>eval_periods</strong> (<em>int</em>) – only assess the n most recent periods of history</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<em class="property">static </em><code class="sig-name descname">set_limit</code><span class="sig-paren">(</span><em class="sig-param">limit</em>, <em class="sig-param">target_shape</em>, <em class="sig-param">df_train</em>, <em class="sig-param">direction='upper'</em>, <em class="sig-param">period='forecast'</em>, <em class="sig-param">forecast_length=None</em>, <em class="sig-param">eval_periods=None</em><span class="sig-paren">)</span></dt>
<dd><p>Handles all limit input styles and returns numpy array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>limit</strong> – see class overview for input options</p></li>
<li><p><strong>target_shape</strong> (<em>tuple</em>) – of (forecast_length, num_series)</p></li>
<li><p><strong>df_train</strong> (<em>pd.DataFrame</em>) – training data</p></li>
<li><p><strong>direction</strong> (<em>str</em>) – whether it is the “upper” or “lower” limit</p></li>
<li><p><strong>period</strong> (<em>str</em>) – “forecast” or “historic” only used for limits defined by forecast algorithm params</p></li>
<li><p><strong>forecast_length</strong> (<em>int</em>) – needed only for historic of forecast algorithm defined limit</p></li>
<li><p><strong>eval_periods</strong> (<em>int</em>) – only for historic forecast limit, only runs on the tail n (this) of data</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="autots.evaluator.event_forecasting.set_limit_forecast">
<code class="sig-prename descclassname">autots.evaluator.event_forecasting.</code><code class="sig-name descname">set_limit_forecast</code><span class="sig-paren">(</span><em class="sig-param">df_train</em>, <em class="sig-param">forecast_length</em>, <em class="sig-param">model_name='SeasonalNaive'</em>, <em class="sig-param">model_param_dict={'lag_1': 28</em>, <em class="sig-param">'lag_2': None</em>, <em class="sig-param">'method': 'median'}</em>, <em class="sig-param">model_transform_dict={'fillna': 'nearest'</em>, <em class="sig-param">'transformation_params': {}</em>, <em class="sig-param">'transformations': {}}</em>, <em class="sig-param">prediction_interval=0.9</em>, <em class="sig-param">frequency='infer'</em>, <em class="sig-param">model_forecast_kwargs={'n_jobs': 'auto'</em>, <em class="sig-param">'random_seed': 321</em>, <em class="sig-param">'verbose': 1}</em>, <em class="sig-param">future_regressor_train=None</em>, <em class="sig-param">future_regressor_forecast=None</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.set_limit_forecast" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for forecast limits set by forecast algorithms.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.event_forecasting.set_limit_forecast_historic">
<code class="sig-prename descclassname">autots.evaluator.event_forecasting.</code><code class="sig-name descname">set_limit_forecast_historic</code><span class="sig-paren">(</span><em class="sig-param">df_train</em>, <em class="sig-param">forecast_length</em>, <em class="sig-param">model_name='SeasonalNaive'</em>, <em class="sig-param">model_param_dict={'lag_1': 28</em>, <em class="sig-param">'lag_2': None</em>, <em class="sig-param">'method': 'median'}</em>, <em class="sig-param">model_transform_dict={'fillna': 'nearest'</em>, <em class="sig-param">'transformation_params': {}</em>, <em class="sig-param">'transformations': {}}</em>, <em class="sig-param">prediction_interval=0.9</em>, <em class="sig-param">frequency='infer'</em>, <em class="sig-param">model_forecast_kwargs={'n_jobs': 'auto'</em>, <em class="sig-param">'random_seed': 321</em>, <em class="sig-param">'verbose': 2}</em>, <em class="sig-param">future_regressor_train=None</em>, <em class="sig-param">future_regressor_forecast=None</em>, <em class="sig-param">eval_periods=None</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.set_limit_forecast_historic" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for forecast limits set by forecast algorithms.</p>
</dd></dl>

</section>
<section id="module-autots.evaluator.metrics">
<span id="autots-evaluator-metrics-module"></span><h2>autots.evaluator.metrics module<a class="headerlink" href="#module-autots.evaluator.metrics" title="Permalink to this headline">¶</a></h2>
<p>Tools for calculating forecast errors.</p>
<dl class="simple">
<dt>Some common args:</dt><dd><p>A or actual (np.array): actuals ndim 2 (timesteps, series)
F or forecast (np.array): forecast values ndim 2 (timesteps, series)
ae (np.array): precalculated np.abs(A - F)</p>
</dd>
</dl>
<dl class="function">
<dt id="autots.evaluator.metrics.containment">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">containment</code><span class="sig-paren">(</span><em class="sig-param">lower_forecast</em>, <em class="sig-param">upper_forecast</em>, <em class="sig-param">actual</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.containment" title="Permalink to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>forecast</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.contour">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">contour</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">F</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.contour" title="Permalink to this definition">¶</a></dt>
<dd><p>A measure of how well the actual and forecast follow the same pattern of change.
<em>Note:</em> If actual values are unchanging, will match positive changing forecasts.
This is faster, and because if actuals are a flat line, contour probably isn’t a concern regardless.</p>
<p>Expects two, 2-D numpy arrays of forecast_length * n series
Returns a 1-D array of results in len n series</p>
<p>NaNs diffs are filled with 0, essentially equiavelent to assuming a forward fill of NaN</p>
<p>Concat the last row of history to head of both A and F (req for 1 step)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.mae">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">mae</code><span class="sig-paren">(</span><em class="sig-param">ae</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mae" title="Permalink to this definition">¶</a></dt>
<dd><p>Accepting abs error already calculated</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.mda">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">mda</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">F</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mda" title="Permalink to this definition">¶</a></dt>
<dd><p>A measure of how well the actual and forecast follow the same pattern of change.
Expects two, 2-D numpy arrays of forecast_length * n series
Returns a 1-D array of results in len n series</p>
<p>NaNs diffs are filled with 0, essentially equiavelent to assuming a forward fill of NaN</p>
<p>Concat the last row of history to head of both A and F (req for 1 step)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.mean_absolute_differential_error">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">mean_absolute_differential_error</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">F</em>, <em class="sig-param">order: int = 1</em>, <em class="sig-param">df_train=None</em>, <em class="sig-param">scaler=None</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mean_absolute_differential_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
<li><p><strong>order</strong> (<em>int</em>) – order of differential</p></li>
<li><p><strong>df_train</strong> (<em>np.array</em>) – if provided, uses this as starting point for first diff step.
Tail(1) must be most recent historical point before forecast.
Must be numpy Array not DataFrame.
Highly recommended if using this as the sole optimization metric.
Without, it is an “unanchored” shape fitting metric.
This will also allow this to work on forecast_length = 1 forecasts</p></li>
<li><p><strong>scaler</strong> (<em>np.array</em>) – if provided, metrics are scaled by this. 1d array of shape (num_series,)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.mean_absolute_error">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">mean_absolute_error</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">F</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mean_absolute_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.medae">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">medae</code><span class="sig-paren">(</span><em class="sig-param">ae</em>, <em class="sig-param">nan_flag=True</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.medae" title="Permalink to this definition">¶</a></dt>
<dd><p>Accepting abs error already calculated</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.median_absolute_error">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">median_absolute_error</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">F</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.median_absolute_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.mlvb">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">mlvb</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">F</em>, <em class="sig-param">last_of_array</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mlvb" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean last value baseline, the % difference of forecast vs last value naive forecast.
Does poorly with near-zero values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.array</em>) – actuals</p></li>
<li><p><strong>F</strong> (<em>np.array</em>) – forecast values</p></li>
<li><p><strong>last_of_array</strong> (<em>np.array</em>) – the last row of the historic training data, most recent values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.mqae">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">mqae</code><span class="sig-paren">(</span><em class="sig-param">ae</em>, <em class="sig-param">q=0.85</em>, <em class="sig-param">nan_flag=True</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mqae" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the mean of errors less than q quantile of the errors per series.
np.nans count as largest values, and so are removed as part of the &gt; q group.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.msle">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">msle</code><span class="sig-paren">(</span><em class="sig-param">full_errors</em>, <em class="sig-param">ae</em>, <em class="sig-param">le</em>, <em class="sig-param">nan_flag=True</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.msle" title="Permalink to this definition">¶</a></dt>
<dd><p>input is array of y_pred - y_true to over-penalize underestimate.
Use instead y_true - y_pred to over-penalize overestimate.
AE used here for the log just to avoid divide by zero warnings (values aren’t used either way)</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.oda">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">oda</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">F</em>, <em class="sig-param">last_of_array</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.oda" title="Permalink to this definition">¶</a></dt>
<dd><p>Origin Directional Accuracy, the accuracy of growth or decline relative to most recent data.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.pinball_loss">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">pinball_loss</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">F</em>, <em class="sig-param">quantile</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.pinball_loss" title="Permalink to this definition">¶</a></dt>
<dd><p>Bigger is bad-er.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.qae">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">qae</code><span class="sig-paren">(</span><em class="sig-param">ae</em>, <em class="sig-param">q=0.9</em>, <em class="sig-param">nan_flag=True</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.qae" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the q quantile of the errors per series.
np.nans count as smallest values and will push more values into the exclusion group.</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.rmse">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">rmse</code><span class="sig-paren">(</span><em class="sig-param">sqe</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.rmse" title="Permalink to this definition">¶</a></dt>
<dd><p>Accepting squared error already calculated</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.root_mean_square_error">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">root_mean_square_error</code><span class="sig-paren">(</span><em class="sig-param">actual</em>, <em class="sig-param">forecast</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.root_mean_square_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>forecast</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.rps">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">rps</code><span class="sig-paren">(</span><em class="sig-param">predictions</em>, <em class="sig-param">observed</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.rps" title="Permalink to this definition">¶</a></dt>
<dd><p>Vectorized version of Ranked Probability Score.
A lower value is a better score.
From: Colin Catlin, <a class="reference external" href="https://syllepsis.live/2022/01/22/ranked-probability-score-in-python/">https://syllepsis.live/2022/01/22/ranked-probability-score-in-python/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>predictions</strong> (<em>pd.DataFrame</em>) – each column is an outcome category, with values as the 0 to 1 probability of that category</p></li>
<li><p><strong>observed</strong> (<em>pd.DataFrame</em>) – each column is an outcome category, with values of 0 OR 1 with 1 being that category occurred</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.scaled_pinball_loss">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">scaled_pinball_loss</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">F</em>, <em class="sig-param">df_train</em>, <em class="sig-param">quantile</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.scaled_pinball_loss" title="Permalink to this definition">¶</a></dt>
<dd><p>Scaled pinball loss.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.array</em>) – actual values</p></li>
<li><p><strong>F</strong> (<em>np.array</em>) – forecast values</p></li>
<li><p><strong>df_train</strong> (<em>np.array</em>) – values of historic data for scaling</p></li>
<li><p><strong>quantile</strong> (<em>float</em>) – which bound of upper/lower forecast this is</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.smape">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">smape</code><span class="sig-paren">(</span><em class="sig-param">actual</em>, <em class="sig-param">forecast</em>, <em class="sig-param">ae</em>, <em class="sig-param">nan_flag=True</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.smape" title="Permalink to this definition">¶</a></dt>
<dd><p>Accepting abs error already calculated</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.spl">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">spl</code><span class="sig-paren">(</span><em class="sig-param">precomputed_spl</em>, <em class="sig-param">scaler</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.spl" title="Permalink to this definition">¶</a></dt>
<dd><p>Accepting most of it already calculated</p>
</dd></dl>

<dl class="function">
<dt id="autots.evaluator.metrics.symmetric_mean_absolute_percentage_error">
<code class="sig-prename descclassname">autots.evaluator.metrics.</code><code class="sig-name descname">symmetric_mean_absolute_percentage_error</code><span class="sig-paren">(</span><em class="sig-param">actual</em>, <em class="sig-param">forecast</em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.symmetric_mean_absolute_percentage_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Expect two, 2-D numpy arrays of forecast_length * n series.
Allows NaN in actuals, and corresponding NaN in forecast, but not unmatched NaN in forecast
Also doesn’t like zeroes in either forecast or actual - results in poor error value even if forecast is accurate</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>forecast</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
<p class="rubric">References</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Symmetric_mean_absolute_percentage_error">https://en.wikipedia.org/wiki/Symmetric_mean_absolute_percentage_error</a></p>
</dd></dl>

</section>
<section id="module-autots.evaluator">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-autots.evaluator" title="Permalink to this headline">¶</a></h2>
<p>Model Evaluators</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/autots_logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Automated Forecasting</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=winedarksea&repo=autots&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html#autots">AutoTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">autots</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="autots.html">autots package</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="modules.html">autots</a><ul>
  <li><a href="autots.html">autots package</a><ul>
      <li>Previous: <a href="autots.datasets.html" title="previous chapter">autots.datasets package</a></li>
      <li>Next: <a href="autots.models.html" title="next chapter">autots.models package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Colin Catlin.
      
      |
      <a href="../_sources/source/autots.evaluator.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-166997414-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>